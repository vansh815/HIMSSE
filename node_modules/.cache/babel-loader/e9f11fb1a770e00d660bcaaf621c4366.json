{"ast":null,"code":"var _jsxFileName = \"/Users/vanshsmacpro/Desktop/Software_engineering/HIMSSE/src/components/Search.js\";\nimport React from 'react';\nimport axios from 'axios';\nimport { useAuth0 } from \"@auth0/auth0-react\";\nimport Button from 'react-bootstrap/Button';\nimport \"./Search.css\";\n\nfunction results(data, fullSearch) {\n  let len = data.length;\n\n  if (fullSearch == '   ') {\n    fullSearch = \"nothing\";\n  }\n\n  let searchCards = document.getElementById(\"demo\");\n  let userResults = `<h1>Your search of ${fullSearch} returned ${len} results.</h1>`;\n  searchCards.insertAdjacentHTML(\"afterbegin\", userResults);\n\n  for (let i = 0; i < len; i++) {\n    let res = data[i]; // example url\n\n    let resString = `<div class=\"searchData\" data-index=\"${res._id}\"><a href=\"https://www.google.com\" target=\"_blank\">${res.first_name} ${res.last_name} - ${res.speciality} in ${res.city}</a></div>`;\n    searchCards.insertAdjacentHTML(\"beforeend\", resString);\n  }\n}\n\nconst Search = props => {\n  const {\n    getAccessTokenSilently\n  } = useAuth0();\n  const token = getAccessTokenSilently();\n  const [state, setState] = React.useState({\n    first_name: '',\n    last_name: '',\n    speciality: '',\n    city: ''\n  });\n\n  const callSecureApi = async query => {\n    const token = await getAccessTokenSilently();\n    const apiUrl = process.env.REACT_APP_API_URL;\n    console.log(query);\n    const searchquery = await axios({\n      headers: {\n        authorization: `Bearer ${token}`\n      },\n      method: 'get',\n      url: `${apiUrl}/doctor/details`,\n      params: query\n    });\n    return searchquery;\n  };\n\n  const handleSubmit = event => {\n    let searchBox = document.getElementById(\"demo\");\n    searchBox.innerHTML = \"\";\n    var fullSearch = state.first_name + ' ' + state.last_name + ' ' + state.speciality + ' ' + state.city;\n    event.preventDefault();\n    let query = {\n      first_name: state.first_name,\n      last_name: state.last_name,\n      speciality: state.speciality,\n      city: state.city\n    };\n    const searchquery = callSecureApi(query);\n    searchquery.then(result => {\n      results(result.data, fullSearch);\n      console.log(result); // document.getElementById(\"demo\").innerHTML = text; \n    }).catch(error => {\n      console.error(error);\n    });\n    setState({\n      first_name: '',\n      last_name: '',\n      speciality: '',\n      city: ''\n    });\n  };\n\n  const handleChange = event => {\n    setState({ ...state,\n      [event.target.name]: event.target.value\n    });\n  };\n\n  return /*#__PURE__*/React.createElement(\"div\", {\n    class: \"searchResults\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 89,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(\"form\", {\n    onSubmit: handleSubmit,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 90,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"input\", {\n    type: \"text\",\n    placeholder: \"Enter first name\",\n    name: \"first_name\",\n    value: state.first_name,\n    onChange: handleChange,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 91,\n      columnNumber: 13\n    }\n  }), /*#__PURE__*/React.createElement(\"input\", {\n    type: \"text\",\n    placeholder: \"Enter last name...\",\n    name: \"last_name\",\n    value: state.last_name,\n    onChange: handleChange,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 92,\n      columnNumber: 13\n    }\n  }), /*#__PURE__*/React.createElement(\"input\", {\n    type: \"text\",\n    placeholder: \"Enter specialization...\",\n    name: \"speciality\",\n    value: state.speciality,\n    onChange: handleChange,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 93,\n      columnNumber: 13\n    }\n  }), /*#__PURE__*/React.createElement(\"input\", {\n    type: \"text\",\n    placeholder: \"Enter location...\",\n    name: \"city\",\n    value: state.city,\n    onChange: handleChange,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 94,\n      columnNumber: 13\n    }\n  }), /*#__PURE__*/React.createElement(Button, {\n    variant: \"primary\",\n    size: \"sm\",\n    type: \"submit\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 95,\n      columnNumber: 13\n    }\n  }, \"Submit\")), /*#__PURE__*/React.createElement(\"div\", {\n    id: \"demo\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 98,\n      columnNumber: 9\n    }\n  }));\n};\n\nexport default Search;","map":{"version":3,"sources":["/Users/vanshsmacpro/Desktop/Software_engineering/HIMSSE/src/components/Search.js"],"names":["React","axios","useAuth0","Button","results","data","fullSearch","len","length","searchCards","document","getElementById","userResults","insertAdjacentHTML","i","res","resString","_id","first_name","last_name","speciality","city","Search","props","getAccessTokenSilently","token","state","setState","useState","callSecureApi","query","apiUrl","process","env","REACT_APP_API_URL","console","log","searchquery","headers","authorization","method","url","params","handleSubmit","event","searchBox","innerHTML","preventDefault","then","result","catch","error","handleChange","target","name","value"],"mappings":"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","sourcesContent":["import React from 'react'\nimport axios from 'axios'\nimport { useAuth0 } from \"@auth0/auth0-react\";\nimport Button from 'react-bootstrap/Button';\nimport \"./Search.css\";\nfunction results (data, fullSearch)\n    {\n      let len = data.length\n      if (fullSearch == '   '){\n        fullSearch = \"nothing\"\n      }\n      \n      let searchCards = document.getElementById(\"demo\");\n      \n      let userResults = `<h1>Your search of ${fullSearch} returned ${len} results.</h1>`;\n      searchCards.insertAdjacentHTML(\"afterbegin\", userResults);\n      for(let i = 0; i < len; i++){\n        let res = data[i]\n        // example url\n        let resString = `<div class=\"searchData\" data-index=\"${res._id}\"><a href=\"https://www.google.com\" target=\"_blank\">${res.first_name} ${res.last_name} - ${res.speciality} in ${res.city}</a></div>`;\n\n        searchCards.insertAdjacentHTML(\"beforeend\", resString);\n      \n      }\n      \n    }\n\nconst Search = (props) => {\n    const { getAccessTokenSilently } = useAuth0();\n    const token = getAccessTokenSilently();\n    const [state, setState] = React.useState({\n        first_name: '',\n        last_name: '',\n        speciality: '',\n        city: ''\n      });\n    \n      const callSecureApi = async (query) => {\n        const token = await getAccessTokenSilently();\n        const apiUrl = process.env.REACT_APP_API_URL;\n        console.log(query)\n        const searchquery = await axios({\n          headers: {\n              authorization: `Bearer ${token}`\n            },\n          method: 'get',\n          \n          url: `${apiUrl}/doctor/details`,\n          params : query\n        })\n        return searchquery\n      }\n    \n      const handleSubmit = (event) => {\n        let searchBox = document.getElementById(\"demo\");\n        searchBox.innerHTML = \"\";\n          var fullSearch = state.first_name + ' ' + state.last_name + ' ' + state.speciality + ' ' + state.city;\n          event.preventDefault();\n          let query=  {\n            first_name: state.first_name,\n            last_name: state.last_name,\n            speciality: state.speciality,\n            city: state.city\n          }\n          const searchquery = callSecureApi(query);\n          \n          searchquery.then(result => {\n            results(result.data, fullSearch); \n            console.log(result); \n            // document.getElementById(\"demo\").innerHTML = text; \n           })\n          .catch(error => { console.error(error); })\n  \n          setState({first_name:'',\n                   last_name: '',\n                   speciality:'',\n                  city: ''});        \n  \n      }\n    \n    const handleChange = (event) => {\n        setState({\n            ...state,\n            [event.target.name]: event.target.value\n        });\n    }\n   \n    return (\n      <div class= \"searchResults\">\n        <form onSubmit={handleSubmit}>\n            <input type = \"text\" placeholder=\"Enter first name\" name=\"first_name\" value = {state.first_name} onChange={handleChange} />\n            <input type = \"text\" placeholder=\"Enter last name...\" name=\"last_name\" value = {state.last_name} onChange={handleChange} />\n            <input type = \"text\" placeholder=\"Enter specialization...\" name=\"speciality\" value = {state.speciality} onChange={handleChange} />\n            <input type = \"text\" placeholder=\"Enter location...\" name=\"city\" value = {state.city} onChange={handleChange} />\n            <Button variant=\"primary\" size=\"sm\" type=\"submit\">Submit</Button>\n        </form>\n        {/* search results here*/}\n        <div id = \"demo\"></div>\n        \n        </div>\n    )\n}\n\nexport default Search\n"]},"metadata":{},"sourceType":"module"}