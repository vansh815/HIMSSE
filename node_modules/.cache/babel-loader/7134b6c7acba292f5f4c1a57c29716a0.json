{"ast":null,"code":"var _jsxFileName = \"/Users/vanshsmacpro/Desktop/Software_engineering/HIMSSE/src/components/Search.js\";\nimport React from 'react';\nimport axios from 'axios';\nimport { useAuth0 } from \"@auth0/auth0-react\"; //import Button from 'react-bootstrap/Button';\n\nimport \"./Search.css\";\nimport { useHistory } from \"react-router-dom\";\nimport { Container, Row, Col, Button, Form, Card } from \"react-bootstrap\";\n\nconst Search = props => {\n  const {\n    getAccessTokenSilently\n  } = useAuth0(); //const token = getAccessTokenSilently();\n\n  const history = useHistory();\n  const [state, setState] = React.useState({\n    first_name: '',\n    last_name: '',\n    speciality: '',\n    city: ''\n  });\n\n  const callSecureApi = async query => {\n    const token = await getAccessTokenSilently();\n    const apiUrl = process.env.REACT_APP_API_URL;\n    console.log(query);\n    const searchquery = await axios({\n      headers: {\n        authorization: `Bearer ${token}`\n      },\n      method: 'get',\n      url: `${apiUrl}/doctor/details`,\n      params: query\n    });\n    return searchquery;\n  };\n\n  const clickProf = () => {\n    history.push(\"/SearchProfile\"); //console.log(history);\n  };\n\n  const handleSubmit = event => {\n    let searchBox = document.getElementById(\"demo\");\n    searchBox.innerHTML = \"\";\n    var fullSearch = state.first_name + ' ' + state.last_name + ' ' + state.speciality + ' ' + state.city;\n    event.preventDefault();\n    let query = {\n      first_name: state.first_name,\n      last_name: state.last_name,\n      speciality: state.speciality,\n      city: state.city\n    };\n    const searchquery = callSecureApi(query);\n    searchquery.then(result => {\n      let data = result.data;\n      console.log(result);\n      let len = data.length;\n      let searchCards = document.getElementById(\"demo\");\n      let userResults = `<h1>Your search of ${fullSearch} returned ${len} results.</h1>`;\n      searchCards.insertAdjacentHTML(\"afterbegin\", userResults);\n      data.map(res => {\n        let resString = `<div class=\"searchData\" data-index=\"${res._id}\">\n                <button variant = \"link\" onClick= clickProf()>${res.first_name} ${res.last_name} - ${res.speciality} in ${res.city}</a>\n                </div>`;\n        searchCards.insertAdjacentHTML(\"beforeend\", resString);\n      }); // document.getElementById(\"demo\").innerHTML = text; \n    }).catch(error => {\n      console.error(error);\n    });\n    setState({\n      first_name: '',\n      last_name: '',\n      speciality: '',\n      city: ''\n    });\n  };\n\n  const handleChange = event => {\n    setState({ ...state,\n      [event.target.name]: event.target.value\n    });\n  };\n\n  return /*#__PURE__*/React.createElement(\"div\", {\n    class: \"searchResults\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 83,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(Form, {\n    onSubmit: handleSubmit,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 84,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(Form.Group, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 85,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(Form.Label, {\n    for: \"first_name\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 86,\n      columnNumber: 15\n    }\n  }, \"First name:\"), /*#__PURE__*/React.createElement(Form.Control, {\n    type: \"text\",\n    name: \"first_name\",\n    value: state.first_name,\n    onChange: handleChange,\n    placeholder: \"e.g John\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 87,\n      columnNumber: 15\n    }\n  }), /*#__PURE__*/React.createElement(\"br\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 88,\n      columnNumber: 15\n    }\n  }), /*#__PURE__*/React.createElement(Form.Label, {\n    for: \"last_name\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 90,\n      columnNumber: 15\n    }\n  }, \"Last name:\"), /*#__PURE__*/React.createElement(Form.Control, {\n    type: \"text\",\n    name: \"last_name\",\n    value: state.last_name,\n    onChange: handleChange,\n    placeholder: \"e.g Doe\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 91,\n      columnNumber: 15\n    }\n  }), /*#__PURE__*/React.createElement(\"br\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 92,\n      columnNumber: 15\n    }\n  }), /*#__PURE__*/React.createElement(Form.Label, {\n    for: \"speciality\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 94,\n      columnNumber: 15\n    }\n  }, \"Specialization\"), /*#__PURE__*/React.createElement(Form.Control, {\n    type: \"text\",\n    name: \"speciality\",\n    value: state.speciality,\n    onChange: handleChange,\n    placeholder: \"e.g dentist\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 95,\n      columnNumber: 15\n    }\n  }), /*#__PURE__*/React.createElement(\"br\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 96,\n      columnNumber: 15\n    }\n  }), /*#__PURE__*/React.createElement(Form.Label, {\n    for: \"city\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 98,\n      columnNumber: 15\n    }\n  }, \"Location:\"), /*#__PURE__*/React.createElement(Form.Control, {\n    type: \"text\",\n    name: \"city\",\n    value: state.city,\n    onChange: handleChange,\n    placeholder: \"e.g Bloomington\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 99,\n      columnNumber: 15\n    }\n  })), /*#__PURE__*/React.createElement(Button, {\n    variant: \"primary\",\n    size: \"sm\",\n    type: \"submit\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 101,\n      columnNumber: 13\n    }\n  }, \"Submit\")), /*#__PURE__*/React.createElement(\"div\", {\n    id: \"demo\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 104,\n      columnNumber: 9\n    }\n  }));\n};\n\nexport default Search;","map":{"version":3,"sources":["/Users/vanshsmacpro/Desktop/Software_engineering/HIMSSE/src/components/Search.js"],"names":["React","axios","useAuth0","useHistory","Container","Row","Col","Button","Form","Card","Search","props","getAccessTokenSilently","history","state","setState","useState","first_name","last_name","speciality","city","callSecureApi","query","token","apiUrl","process","env","REACT_APP_API_URL","console","log","searchquery","headers","authorization","method","url","params","clickProf","push","handleSubmit","event","searchBox","document","getElementById","innerHTML","fullSearch","preventDefault","then","result","data","len","length","searchCards","userResults","insertAdjacentHTML","map","res","resString","_id","catch","error","handleChange","target","name","value"],"mappings":"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","sourcesContent":["import React from 'react'\nimport axios from 'axios'\nimport { useAuth0 } from \"@auth0/auth0-react\";\n//import Button from 'react-bootstrap/Button';\nimport \"./Search.css\";\nimport { useHistory } from \"react-router-dom\";\nimport { Container, Row, Col, Button, Form, Card } from \"react-bootstrap\";\nconst Search = (props) => {\n    const { getAccessTokenSilently } = useAuth0();\n    //const token = getAccessTokenSilently();\n    const history = useHistory();\n    const [state, setState] = React.useState({\n        first_name: '',\n        last_name: '',\n        speciality: '',\n        city: ''\n      });\n    \n      const callSecureApi = async (query) => {\n        const token = await getAccessTokenSilently();\n        const apiUrl = process.env.REACT_APP_API_URL;\n        console.log(query)\n        const searchquery = await axios({\n          headers: {\n              authorization: `Bearer ${token}`\n            },\n          method: 'get',\n          url: `${apiUrl}/doctor/details`,\n          params : query\n        })\n        return searchquery\n      }\n      const clickProf = () => {\n        history.push(\"/SearchProfile\")\n        //console.log(history);\n      }\n      const handleSubmit = (event) => {\n        let searchBox = document.getElementById(\"demo\");\n        searchBox.innerHTML = \"\";\n          var fullSearch = state.first_name + ' ' + state.last_name + ' ' + state.speciality + ' ' + state.city;\n          event.preventDefault();\n          let query=  {\n            first_name: state.first_name,\n            last_name: state.last_name,\n            speciality: state.speciality,\n            city: state.city\n          }\n          const searchquery = callSecureApi(query);\n          \n          searchquery.then(result => { \n            let data = result.data;\n            console.log(result); \n            let len = data.length\n            let searchCards = document.getElementById(\"demo\");      \n            let userResults = `<h1>Your search of ${fullSearch} returned ${len} results.</h1>`;\n            searchCards.insertAdjacentHTML(\"afterbegin\", userResults);\n            data.map(res => {\n                let resString = \n                `<div class=\"searchData\" data-index=\"${res._id}\">\n                <button variant = \"link\" onClick= clickProf()>${res.first_name} ${res.last_name} - ${res.speciality} in ${res.city}</a>\n                </div>`;\n\n                searchCards.insertAdjacentHTML(\"beforeend\", resString);}\n                )\n            // document.getElementById(\"demo\").innerHTML = text; \n           })\n          .catch(error => { console.error(error); })\n  \n          setState({first_name:'',\n                   last_name: '',\n                   speciality:'',\n                  city: ''});        \n      }\n    \n    const handleChange = (event) => {\n        setState({\n            ...state,\n            [event.target.name]: event.target.value\n        });\n    }\n   \n    return (\n      <div class= \"searchResults\">\n        <Form onSubmit={handleSubmit}>\n          <Form.Group>\n              <Form.Label for=\"first_name\">First name:</Form.Label>\n              <Form.Control type=\"text\" name=\"first_name\" value={state.first_name} onChange={handleChange} placeholder=\"e.g John\"/>\n              <br />\n          \n              <Form.Label for=\"last_name\">Last name:</Form.Label>\n              <Form.Control type=\"text\" name=\"last_name\" value={state.last_name} onChange={handleChange} placeholder=\"e.g Doe\"/>\n              <br />\n\n              <Form.Label for=\"speciality\">Specialization</Form.Label>\n              <Form.Control type=\"text\" name=\"speciality\" value={state.speciality} onChange={handleChange} placeholder=\"e.g dentist\"/>\n              <br />\n\n              <Form.Label for=\"city\">Location:</Form.Label>\n              <Form.Control type=\"text\" name=\"city\" value={state.city} onChange={handleChange} placeholder = \"e.g Bloomington\"/>\n          </Form.Group>\n            <Button variant=\"primary\" size=\"sm\" type=\"submit\">Submit</Button>\n        </Form>\n        \n        <div id = \"demo\"></div>\n        \n        </div>\n    )\n}\n\nexport default Search\n"]},"metadata":{},"sourceType":"module"}