{"ast":null,"code":"var _jsxFileName = \"/Users/vanshsmacpro/Desktop/Software_engineering/HIMSSE/src/components/SearchProfile.js\";\nimport React, { Component } from 'react';\nimport { Form, Row, Col, Container, Button, Jumbotron } from \"react-bootstrap\";\nimport { useLocation } from \"react-router-dom\";\nimport { useEffect } from \"react\";\nimport axios from 'axios';\nimport { useAuth0 } from \"@auth0/auth0-react\";\n\nconst SearchProfile = () => {\n  const {\n    user,\n    getAccessTokenSilently,\n    isAuthenticated\n  } = useAuth0();\n  const location = useLocation();\n  const [state, setState] = React.useState({\n    first_name: location.state.detail.first_name,\n    last_name: location.state.detail.last_name,\n    speciality: location.state.detail.speciality,\n    address: location.state.detail.address,\n    doctor_email: location.state.detail.email\n  });\n\n  const handleChange = event => {\n    setState({ ...state,\n      [event.target.name]: event.target.value\n    });\n  };\n\n  const callSecureApi = async query => {\n    const token = await getAccessTokenSilently();\n    const apiUrl = process.env.REACT_APP_API_URL;\n    console.log(query);\n    const searchquery = await axios({\n      headers: {\n        authorization: `Bearer ${token}`\n      },\n      method: 'get',\n      url: `${apiUrl}/booking/details`,\n      params: query\n    });\n    return searchquery;\n  };\n\n  const callSecureApiPost = async query => {\n    const token = await getAccessTokenSilently();\n    const apiUrl = process.env.REACT_APP_API_URL;\n    console.log(query);\n    fetch(`${apiUrl}/booking/details`, {\n      method: \"POST\",\n      headers: {\n        \"Authorization\": `Bearer ${token}`,\n        \"Content-Type\": \"application/json\"\n      },\n      body: query\n    }).then(response => {\n      if (!response.ok) {\n        console.log(\"Error\");\n      } else {\n        console.log(\"Success\");\n      }\n    });\n  };\n\n  const handleSubmit = event => {\n    // GET\n    event.preventDefault();\n    let query = {\n      doctor_email: state.doctor_email\n    };\n    const searchquery = callSecureApi(query);\n    console.log(\"here\");\n    console.log(searchquery);\n    searchquery.then(result => {\n      let data = result.data;\n      const appointment = state.date + \"/\" + state.time; // user's pending appt\n\n      var x = 0;\n      var i;\n\n      for (i = 0; i < data.length; i++) {\n        // check availability of doctor\n        console.log(\"Loop Index: \" + i);\n\n        if (data[i] === appointment) {\n          x = 1;\n          alert(\"Sorry, this time slot is not available. Please choose another time and try again.\");\n        }\n      }\n\n      if (x === 0) {\n        alert(\"This time slot is available! Please click Confirm Appointment to continue.\");\n      }\n    }).catch(error => {\n      console.error(error);\n    });\n  };\n\n  const handleConfirm = event => {\n    //POST\n    event.preventDefault();\n    const appointment = state.date + \"/\" + state.time;\n    let query = {\n      doctor_email: state.doctor_email,\n      appointments: appointment\n    };\n    console.log(query);\n    const searchquery = callSecureApiPost(query);\n    console.log(\"Successful\");\n    console.log(searchquery);\n  };\n\n  useEffect(() => {\n    state.first_name = location.state.detail.first_name;\n    state.last_name = location.state.detail.last_name;\n    state.speciality = location.state.detail.speciality;\n    state.address = location.state.detail.address;\n    state.doctor_email = location.state.detail.email;\n  }, [location]);\n  /*componentDidMount() {\n      var item = this.props.history.location.state.item;\n      console.log(this.props.history.location.state.item);\n      this.setState({\n        firstname: item.firstname,\n        lastname: item.lastname,\n        speciality: item.speciality,\n        location: item.location,\n      });\n    }*/\n\n  return /*#__PURE__*/React.createElement(Container, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 131,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(Jumbotron, {\n    style: {\n      backgroundColor: \"#65aabf\"\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 132,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(Row, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 133,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(Col, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 134,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(\"h1\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 135,\n      columnNumber: 13\n    }\n  }, \"Profile Page\"), /*#__PURE__*/React.createElement(\"p\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 136,\n      columnNumber: 13\n    }\n  }, \"First Name : \", state.first_name, \"\", /*#__PURE__*/React.createElement(\"br\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 139,\n      columnNumber: 15\n    }\n  }), \"Last Name : \", state.last_name, \"\", /*#__PURE__*/React.createElement(\"br\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 142,\n      columnNumber: 15\n    }\n  }), \"Speciality : \", state.speciality, /*#__PURE__*/React.createElement(\"br\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 144,\n      columnNumber: 15\n    }\n  }), \"Location : \", state.address)), /*#__PURE__*/React.createElement(Col, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 149,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(Form, {\n    onSubmit: handleSubmit,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 150,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(Form.Group, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 151,\n      columnNumber: 15\n    }\n  }, /*#__PURE__*/React.createElement(Row, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 152,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(Form.Label, {\n    for: \"date\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 153,\n      columnNumber: 19\n    }\n  }, \"Date: \"), /*#__PURE__*/React.createElement(Form.Control, {\n    type: \"date\",\n    name: \"date\",\n    value: state.date,\n    onChange: handleChange,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 154,\n      columnNumber: 19\n    }\n  })), /*#__PURE__*/React.createElement(\"br\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 156,\n      columnNumber: 17\n    }\n  }), /*#__PURE__*/React.createElement(Row, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 157,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(Form.Label, {\n    for: \"time\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 158,\n      columnNumber: 19\n    }\n  }, \"Time: \"), /*#__PURE__*/React.createElement(Form.Control, {\n    type: \"time\",\n    step: \"1800\",\n    name: \"time\",\n    value: state.time,\n    onChange: handleChange,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 159,\n      columnNumber: 19\n    }\n  })), /*#__PURE__*/React.createElement(\"br\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 161,\n      columnNumber: 17\n    }\n  }), /*#__PURE__*/React.createElement(Button, {\n    variant: \"dark\",\n    type: \"submit\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 162,\n      columnNumber: 17\n    }\n  }, \"Check Availability\"), ' ')), /*#__PURE__*/React.createElement(\"p\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 167,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(Button, {\n    variant: \"dark\",\n    onClick: handleConfirm,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 168,\n      columnNumber: 15\n    }\n  }, \"Confirm Appointment\"))))));\n};\n\nexport default SearchProfile;","map":{"version":3,"sources":["/Users/vanshsmacpro/Desktop/Software_engineering/HIMSSE/src/components/SearchProfile.js"],"names":["React","Component","Form","Row","Col","Container","Button","Jumbotron","useLocation","useEffect","axios","useAuth0","SearchProfile","user","getAccessTokenSilently","isAuthenticated","location","state","setState","useState","first_name","detail","last_name","speciality","address","doctor_email","email","handleChange","event","target","name","value","callSecureApi","query","token","apiUrl","process","env","REACT_APP_API_URL","console","log","searchquery","headers","authorization","method","url","params","callSecureApiPost","fetch","body","then","response","ok","handleSubmit","preventDefault","result","data","appointment","date","time","x","i","length","alert","catch","error","handleConfirm","appointments","backgroundColor"],"mappings":"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","sourcesContent":["import React, {Component} from 'react'\nimport { Form, Row, Col, Container, Button, Jumbotron } from \"react-bootstrap\";\nimport { useLocation } from \"react-router-dom\";\nimport { useEffect } from \"react\";\nimport axios from 'axios'\nimport { useAuth0 } from \"@auth0/auth0-react\";\n\n\nconst SearchProfile = () => {\n  const { user, getAccessTokenSilently , isAuthenticated} = useAuth0();\n  const location = useLocation();\n  \n\n  const [state, setState] = React.useState({\n    first_name: location.state.detail.first_name,\n    last_name: location.state.detail.last_name,\n    speciality: location.state.detail.speciality,\n    address: location.state.detail.address,\n    doctor_email : location.state.detail.email\n  });\n\n  const handleChange = (event) => {\n    setState({\n      ...state,\n      [event.target.name]: event.target.value,\n    });\n  };\n\n  const callSecureApi = async (query) => {\n    const token = await getAccessTokenSilently();\n    const apiUrl = process.env.REACT_APP_API_URL;\n    console.log(query);\n    const searchquery = await axios({\n      headers: {\n          authorization: `Bearer ${token}`\n        },\n      method: 'get',\n      url: `${apiUrl}/booking/details`,\n      params: query\n    })\n    return searchquery\n  }\n\n  const callSecureApiPost = async (query) => {\n    const token = await getAccessTokenSilently();\n    const apiUrl = process.env.REACT_APP_API_URL;\n    console.log(query);\n    fetch(`${apiUrl}/booking/details` , {\n        method : \"POST\",\n        headers : {\n            \"Authorization\": `Bearer ${token}`,\n            \"Content-Type\" : \"application/json\",\n        },\n        body: query,\n    }).then((response) => {\n        if (!response.ok){\n            console.log(\"Error\");\n        } else{\n            console.log(\"Success\");\n        }\n    });\n};\n\n  const handleSubmit = (event) => { // GET\n    event.preventDefault();\n    let query=  {\n      doctor_email: state.doctor_email,\n    }\n    const searchquery = callSecureApi(query);\n    console.log(\"here\");\n    console.log(searchquery);\n    \n    searchquery.then(result => { \n      let data = result.data;     \n\n      const appointment = state.date + \"/\" + state.time; // user's pending appt\n\n      var x = 0;\n      var i;\n      for (i = 0; i < data.length; i++) { // check availability of doctor\n        console.log(\"Loop Index: \" + i);\n        if (data[i] === appointment) {\n          x = 1;\n          alert(\"Sorry, this time slot is not available. Please choose another time and try again.\");\n        }\n      }\n\n      if (x === 0) {\n        alert(\"This time slot is available! Please click Confirm Appointment to continue.\");\n      }\n\n      })\n    .catch(error => { console.error(error); })\n  };\n\n  const handleConfirm = (event) => { //POST\n    event.preventDefault();\n    const appointment = state.date + \"/\" + state.time;\n\n    let query = {\n      doctor_email: state.doctor_email,\n      appointments: appointment\n    }\n\n    console.log(query);\n    const searchquery = callSecureApiPost(query);\n    console.log(\"Successful\");\n    console.log(searchquery);\n  }\n\n  useEffect(() => {\n    state.first_name = location.state.detail.first_name;\n    state.last_name = location.state.detail.last_name;\n    state.speciality = location.state.detail.speciality;\n    state.address = location.state.detail.address;\n    state.doctor_email = location.state.detail.email;\n  }, [location]);\n\n  /*componentDidMount() {\n      var item = this.props.history.location.state.item;\n      console.log(this.props.history.location.state.item);\n      this.setState({\n        firstname: item.firstname,\n        lastname: item.lastname,\n        speciality: item.speciality,\n        location: item.location,\n      });\n    }*/\n  \n  return (\n    <Container>\n      <Jumbotron style={{ backgroundColor: \"#65aabf\" }}>\n        <Row>\n          <Col>\n            <h1>Profile Page</h1>\n            <p>\n              First Name : {state.first_name}\n              {\"\"}\n              <br />\n              Last Name : {state.last_name}\n              {\"\"}\n              <br />\n              Speciality : {state.speciality}\n              <br />\n              Location : {state.address}\n            </p>\n          </Col>\n\n          <Col>\n            <Form onSubmit={handleSubmit}>\n              <Form.Group>\n                <Row>\n                  <Form.Label for=\"date\">Date: </Form.Label>\n                  <Form.Control type=\"date\" name=\"date\" value={state.date} onChange={handleChange} />\n                </Row>\n                <br />\n                <Row>\n                  <Form.Label for=\"time\">Time: </Form.Label>\n                  <Form.Control type=\"time\" step=\"1800\" name=\"time\" value={state.time} onChange={handleChange} />\n                </Row>\n                <br />\n                <Button variant=\"dark\" type=\"submit\">Check Availability</Button>{' '}\n                  \n              </Form.Group>\n            </Form>\n  \n            <p>\n              <Button variant=\"dark\" onClick={handleConfirm}>Confirm Appointment</Button>\n            </p>\n          </Col>\n        </Row>\n      </Jumbotron>\n    </Container>\n  );\n}\n\nexport default SearchProfile;\n"]},"metadata":{},"sourceType":"module"}